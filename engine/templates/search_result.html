{% extends "home.html" %}
{% load crispy_forms_tags %}
{% load static %}
{% load extended_tags %}

{% block set_list %}

    <link rel="stylesheet" type="text/css" href="{% static 'custom_css/search_result.css' %}">

    <script>
        $(function() {
            let isMobile = window.matchMedia("only screen and (max-width: 760px)").matches;

            if (isMobile) {

            }
         });
    </script>

    <script>
      $( function() {
        $( "#accordion" ).accordion({
          collapsible: true,
          active: false,
          heightStyle: "content",
        });
      } );
    </script>

    <script src="{% static 'custom_js/search_condition_tab.js' %}"></script>

    <div class="container-fluid" style="min-height:95%;">
        <div class="row">
            <nav id="search-sidebar" class="col-md-2 d-sm-block bg-dark sidebar">
                <div class="sidebar-sticky">
                    <div id="advanced-search-div" style="">
                        <hr style="background-color: white;">
                        <h4>
                            <a href="#advanced-search-container" style="color:rgba(255, 255, 255, 1);" data-toggle="collapse" class="active"> Advanced
                            Search
                            </a>
                        </h4>
                        <div class="collapse" id="advanced-search-container">
                            <form method="GET" action="{% url 'search' %}">
                                 <fieldset>
                                     <div id="accordion">

                                         <label>Name</label>
                                         <div>
                                             <div class="form-row">
                                                  <div class="input-group input-group-sm mb-3">
                                                      {{form.name_query|as_crispy_field}}
                                                  </div>
                                             </div>
                                             <div class="form-row">
                                                  <div class="input-group input-group-sm mb-3">
                                                      {{form.name}}
                                                  </div>
                                             </div>
                                         </div>

                                         <label>Oracle Text</label>
                                         <div>
                                             <div id="oracle-text-help-text" title="Oracle Text">
                                                 <p>Search the updated rules text of a card for keywords, phrases, or mana
                                                     symbols. Separate each query by a comma. Use the following symbols to match the tap symbol and
                                                     mana symbols:<br>
                                                     {T} = Tap Symbol<br>
                                                     {W} = White<br>
                                                     {U} = Blue<br>
                                                     {B} = Black<br>
                                                     {R} = Red<br>
                                                     {G} = Green<br>
                                                     Example: "{T},destroy target,discard"
                                                 </p>
                                            </div>
                                             <div class="form-row">
                                                 <button id="oracle-text-help-button" class="btn btn-outline-light" type="button"><span
                                                         style="color: rgba(0, 0, 0, 1);">Text
                                                     Contains</span> <i
                                                    class="material-icons help-bubble">help</i>
                                                 </button>
                                             </div>

                                            <div class="input-group input-group-sm mb-3">
                                                {{form.oracle_text}}
                                            </div>
                                         </div>

                                         <label>Set</label>
                                         <div>

                                             <div id="set-help-text" title="Set Name">
                                                 <p>Filter results to be in one or more sets. each set must be separated by a comma.</p>
                                             </div>
                                             <div class="form-row">
                                                 <button id="set-help-button" class="btn btn-outline-light" type="button">
                                                     <span style="color: rgba(0, 0, 0, 1);">Cards in set</span>
                                                     <i class="material-icons help-bubble">help</i>
                                                 </button>
                                             </div>
                                             <div class="input-group input-group-sm mb-3">
                                                 {{form.expansion}}
                                             </div>

                                         </div>

                                         <label>Artists</label>
                                         <div class="">

                                             <div id="artist-help-text" title="Artists">
                                                 <p>Filter results by one or more artists. Each artist must be separated by a comma</p>
                                             </div>
                                             <div class="form-row">
                                                 <button id="artist-help-button" class="btn btn-outline-light" type="button">
                                                     <span style="color: rgba(0, 0, 0, 1);">card art by</span>
                                                     <i class="material-icons help-bubble">help</i>
                                                 </button>
                                             </div>

                                            <div class="input-group input-group-sm mb-3">
                                              {{form.artist}}
                                            </div>
                                         </div>

                                         <label class="">Colors</label>
                                         <div class="">
                                             <div style="" class="form-row">
                                                 <div class="form-check form-check-inline">
                                                     {{form.colors|as_crispy_field}}
                                                 </div>
                                             </div>
                                         </div>

                                         <label class="">Color Identity</label>
                                         <div class="">
                                            <div class="input-group input-group-sm mb-3">
                                              {{form.color_identity|as_crispy_field}}
                                            </div>
                                         </div>

                                         <label class="">CMC</label>
                                         <div class="">

                                            <div style="max-width: 70%;" class="input-group input-group-sm">
                                                {{form.cmc_start}}&nbsp;
                                                <span class="advanced-search-between-inputs">to</span>&nbsp;{{form.cmc_end}}
                                            </div>

                                             <div id="cmc-help-text" title="Converted Mana Cost">
                                                 <p>This is the mana cost exactly as it appears on the top of the card.</p>
                                             </div>
                                             <div class="form-row">
                                                 <button id="cmc-help-button" class="btn btn-outline-light" type="button"><i
                                                    class="material-icons help-bubble">help</i></button>
                                             </div>
                                         </div>

                                         <label class="">Rarity</label>
                                         <div class="">

                                             <div id="rarity-help-text" title="Rarity">
                                                 <p>Filter results for each rarity selected</p>
                                             </div>
                                             <div class="form-row">
                                                 <button id="rarity-help-button" class="btn btn-outline-light" type="button">
                                                     <span style="color: rgba(0, 0, 0, 1);"></span>
                                                     <i class="material-icons help-bubble">help</i></button>
                                             </div>
                                             <div class="input-group input-group-sm mb-3">
                                                 {{form.rarity|as_crispy_field}}
                                             </div>
                                         </div>

                                         <label class="">Card Types</label>
                                         <div class="">
                                            <div class="input-group input-group-sm mb-3">
                                              {{form.card_type|as_crispy_field}}
                                            </div>
                                         </div>

                                         <label class="">Subtypes</label>
                                         <div class="">
                                             <div id="subtypes-help-text" title="Card Subtypes">
                                                 <p>
                                                     Filter results by each subtype a card contains. Each query must be separated by a comma.
                                                     <br>
                                                     Example: "Human,Wizard"
                                                 </p>
                                             </div>
                                             <div class="form-row">
                                                 <button id="subtypes-help-button" class="btn btn-outline-light" type="button">
                                                     <span style="color: rgba(0, 0, 0, 1);">Card Subtypes</span>
                                                     <i class="material-icons help-bubble">help</i>
                                                 </button>
                                             </div>

                                             <div class="input-group input-group-sm mb-3">
                                                 {{form.subtypes|as_crispy_field}}
                                             </div>
                                         </div>

                                         <label class="">Power</label>
                                         <div class="">
                                            <div style="max-width: 70%;" class="input-group input-group-sm">
                                                {{form.power_start}}&nbsp;<span class="advanced-search-between-inputs">to
                                            </span>&nbsp;{{form.power_end}}
                                            </div>
                                         </div>

                                         <label class="">Toughness</label>
                                         <div class="">
                                            <div style="max-width: 70%;" class="input-group input-group-sm">
                                                {{form.toughness_start}}
                                                &nbsp;<span class="advanced-search-between-inputs">to</span>&nbsp;
                                                {{form.toughness_end}} <br>
                                            </div>
                                         </div>

                                     </div>
                                 </fieldset>
                                <button  id="advanced-search-submit-button" onclick="pageSpinner()" name="advanced-search-form" value="advanced-query"
                                         class="btn btn-secondary btn-lg btn-block" type="submit">Apply Filters</button>
                            </form>
                        </div>
                    </div>
                </div>
            </nav>
            <div style="" class="col-sm-10">

                {% if advanced_query %}
                    <br>
                    <div style="" class="row">
                        <h4 style="color: rgba(0, 0, 0, 0.7);">Search Filters</h4>
                    </div>
                    <div style="" class="row">

                        <table style="" class="nav-tabs nav-stacked table table-borderless table-responsive table-sm">
                            <thead>
                            <tr>
                                {% for query in advanced_query %}
                                    <td>{{query.col}}:</td>
                                {% endfor %}
                            </tr>
                            </thead>

                            <tbody>
                            <tr>
                                {% for query in advanced_query %}
                                    <td>{{query.value}}</td>
                                {% endfor %}
                            </tr>
                            </tbody>
                        </table>
                    </div>
                {% endif %}

                {% if error == "empty query" %}
                    <br>
                    <h4>No matching Results</h4>
                    <p class="text-justify">We were not able to find any matching results for your search. Please check your spelling or use our
                        <strong>Advanced
                        Search</strong>
                        feature and try again.</p>
                    <hr>
                    <hr>
                    <h4 style="color: rgba(0, 0, 0, 0.5);">Advanced Search Guide</h4>

                {% else %}
                    <br>

                    <div class="row">
                        <div style="color: rgba(0, 0, 0, 0.6);" class="col-sm-3">Viewing {{ items.start_index }}-{{ items.end_index }} of
                            {{ items.paginator.count }} results</div>
                        <div class="col-sm-7"></div>

                         <!--<div class="col-sm-1">
                            <div class="dropdown">
                                <button class="btn btn-light dropdown-toggle" type="button" data-toggle="dropdown"
                                        aria-haspopup="true"
                                        aria-expanded="false">
                                    Show
                                </button>
                                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                    <button type="button" name="per_page_10" class="btn btn-light dropdown-item">10 cards per page</button>
                                    <button name="per_page_20" class="btn btn-light dropdown-item">20 cards per page</button>
                                    <button name="per_page_30" class="btn btn-light dropdown-item">30 cards per page</button>

                                </div>
                            </div>
                        </div>

                        <div class="col-sm-1">
                            <div class="dropdown">
                                <button class="btn btn-light dropdown-toggle" type="button" data-toggle="dropdown"
                                        aria-haspopup="true"
                                        aria-expanded="false">
                                    Sort By
                                </button>
                                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                    <form method="GET" action="{% url 'search' %}">
                                        <button name="sort_by_set_reverse" value="{{ request.get_full_path }}" class="btn btn-light dropdown-item">Set
                                            (Z-A)</button>
                                    </form>
                                </div>
                            </div>
                        </div>-->
                        <div class="col-sm-2">{% include 'pagination.html' %}</div>
                    </div>
                    <div class="table-responsive">
                        <table style="color: rgb(80,80,80);" class="nav-tabs nav-stacked table table-hover table-lg">
                            <thead class="thead-inverse"></thead>
                            <tbody>
                                {% for item in items %}
                                    <tr>
                                        <td>
                                            <img class="img-thumbnail" style="max-height:200px;" src="{{item.image_url}}">
                                            <div id="imgbox"></div>
                                        </td>

                                        <td>
                                            <div class="hidden-dialog" id="card-info-text-{{ item.product_id }}" title="{{ item.name }}">
                                                <table class="card-info-popup-table table-responsive">
                                                    <tbody>
                                                        <tr>
                                                            <td class="card-info-popup-data-label">Set:</td>
                                                            <td>{{ item.expansion }}</td>
                                                        </tr>

                                                        {% if item.artist %}
                                                            <tr>
                                                                <td class="card-info-popup-data-label">Artist:</td>
                                                                <td>{{ item.artist }}</td>
                                                            </tr>
                                                        {% endif %}

                                                        {% if item.power %}
                                                            <tr>
                                                                <td class="card-info-popup-data-label">Power / Toughness:</td>
                                                                <td>{{ item.power }} / {{ item.toughness }}</td>
                                                            </tr>
                                                        {% endif %}

                                                        {% if item.loyalty %}
                                                            <tr>
                                                                <td class="card-info-popup-data-label">Loyalty:</td>
                                                                <td>{{ item.loyalty }}</td>
                                                            </tr>
                                                        {% endif %}

                                                        {% if item.rarity %}
                                                            <tr>
                                                                <td class="card-info-popup-data-label">Rarity:</td>
                                                                <td>{{ item.rarity }}</td>
                                                            </tr>
                                                        {% endif %}

                                                        {% if item.card_type %}
                                                            <tr>
                                                                <td class="card-info-popup-data-label">Card Type:</td>
                                                                <td>{{ item.card_type }}</td>
                                                            </tr>
                                                        {% endif %}

                                                        {% if item.subtypes%}
                                                            <tr>
                                                                <td class="card-info-popup-data-label">Subtypes:</td>
                                                                <td>{{ item.subtypes }}</td>
                                                            </tr>
                                                        {% endif %}

                                                        {% if item.mana_cost %}
                                                            <tr>
                                                                <td class="card-info-popup-data-label">Mana Cost:</td>
                                                                <td>{{ item.mana_cost }}</td>
                                                            </tr>
                                                        {% endif %}

                                                        {% if item.color_identity %}
                                                            <tr>
                                                                <td class="card-info-popup-data-label">Color Identity:</td>
                                                                <td>{{ item.color_identity }}</td>
                                                            </tr>
                                                        {% endif %}

                                                    </tbody>
                                                </table>

                                                {% if item.oracle_text %}
                                                    <br>
                                                    <div class="row">
                                                        <p>
                                                            "{{ item.oracle_text }}"
                                                        </p>
                                                    </div>
                                                {% endif %}
                                            </div>

                                            <div class="form-row">
                                                <a href="javascript: void(0)" id="card-info-button-{{ item.product_id }}">
                                                    <span>{{ item.name }}</span>
                                                </a>
                                            </div>

                                            <script>
                                                var textId = "card-info-text-{{ item.product_id }}";
                                                var buttonId = "card-info-button-{{ item.product_id }}";
                                                jqueryDialogBox("#" + textId, "#" + buttonId);
                                            </script>
                                        </td>

                                        <td>
                                            {% if request.user.is_authenticated %}

                                                <div class="form-row">
                                                    <form  method="GET" class="wishlist-submit-form" data-url="{% url 'wishlist' %}"
                                                          data-value="{{ item.product_id }}" title="Added to Wishlist">
                                                        <input type="hidden" name="wishlist-item" value="{{ item.product_id }}">
                                                        <button type="submit" class="btn btn-outline-light">
                                                            <i id="wishlist-icon-{{ item.product_id }}" style="color:rgba(0, 0, 0, 0.5);"
                                                               class="material-icons">favorite
                                                            </i>
                                                        </button>
                                                    </form>

                                                </div>

                                            {% else %}

                                                <div class="" id="wishlist-content-{{ item.product_id }}" title="Wishlist">
                                                    <h4>You must be logged in to use this feature</h4>
                                                    <hr>
                                                    <form method="GET" action="{% url 'login' %}">
                                                        <button type="submit" class="btn opaque-black-background">Login Now</button>
                                                        <input name="redirect-path" type="hidden" value="{{ request.get_full_path }}">
                                                    </form>
                                                </div>

                                                <div class="form-row">
                                                    <a id="wishlist-button-{{ item.product_id }}" href="javascript: void(0)">
                                                        <i class="material-icons opaque-black-text">favorite</i>
                                                    </a>
                                                </div>

                                                <script>
                                                    var textId = "wishlist-content-{{ item.product_id }}";
                                                    var buttonId = "wishlist-button-{{ item.product_id }}";
                                                    jqueryDialogBox("#" + textId, "#" + buttonId);
                                                </script>

                                            {% endif %}


                                        </td>



                                        {% if item.mana_cost %}
                                            <td>
                                                <div class="search-page-mana-cost" data-value="{{item.mana_cost_encoded}}"></div>
                                            </td>
                                        {% endif %}

                                        <td>{{item.card_type}}</td>

                                        <td>{{item.expansion}} ({{item.rarity}})</td>

                                        <td class="condition-info-tab">
                                            <div style="position: relative;">

                                                <ul class="nav nav-tabs mb-3 condition-info" id="{{item.product_id}}" role="tablist"></ul>

                                                <script>
                                                     conditionTab(
                                                        "clean", "CL", "{{item.normal_clean_stock}}", "{{item.foil_clean_stock}}", "{{item.product_id}}",
                                                        "true"
                                                     );

                                                      conditionTab(
                                                        "played", "PL", "{{item.normal_played_stock}}", "{{item.foil_played_stock}}", "{{item.product_id}}",
                                                        "false"
                                                     );

                                                     conditionTab(
                                                        "heavily_played", "HP", "{{item.normal_heavily_played_stock}}",
                                                         "{{item.foil_heavily__played_stock}}", "{{item.product_id}}", "false"
                                                     );

                                                     conditionTab(
                                                        "restock", "Restock", "0",
                                                         "0", "{{item.product_id}}", "false"
                                                     );
                                                </script>


                                                <div class="tab-content" id="tabs-tabContent-{{item.product_id}}"></div>

                                                {% if request.user.is_authenticated %}
                                                    <div class="" id="restock-content-submit-{{ item.product_id }}" title="Select Restock Variants">

                                                        <form method="GET" class="restock-submit-form" data-url="{% url 'restock_notice' %}"
                                                              data-value="{{ item.product_id }}" title="Notification list updated!">

                                                            <div class="form-row opaque-black-text">Printing</div>

                                                            <div class="form-check form-check-inline">
                                                              <input class="form-check-input" type="checkbox" id="inlineCheckbox1"
                                                                     name="variations" value="normal">
                                                              <label class="form-check-label" for="inlineCheckbox1">Normal</label>
                                                            </div>

                                                            <div class="form-check form-check-inline">
                                                              <input class="form-check-input" type="checkbox" id="inlineCheckbox2" name="variations" value="foil">
                                                              <label class="form-check-label" for="inlineCheckbox2">Foil</label>
                                                            </div>

                                                            <div class="form-row opaque-black-text">Condition</div>

                                                            <div class="form-check form-check-inline">
                                                                <input class="form-check-input" type="checkbox" name="variations" value="clean" id="defaultCheck3">
                                                                <label class="form-check-label" for="defaultCheck3">clean</label>
                                                            </div>
                                                            <div class="form-check form-check-inline">
                                                                <input class="form-check-input" type="checkbox" name="variations" value="played" id="defaultCheck4">
                                                                <label class="form-check-label" for="defaultCheck4">played</label>
                                                            </div>
                                                            <div class="form-check form-check-inline">
                                                                <input class="form-check-input" type="checkbox" name="variations" value="heavily_played" id="defaultCheck5">
                                                                <label class="form-check-label" for="defaultCheck5">heavily played</label>
                                                            </div>

                                                            <hr>

                                                            <div class="form-row">
                                                                <button id="restock-button-{{ item.product_id }}" type="submit" onclick="pageSpinner()"
                                                                        class="btn opaque-black-background">Submit</button>
                                                            </div>

                                                        </form>
                                                    </div>

                                                    <script>
                                                        populateConditionTable(
                                                            "true", "clean",
                                                             "{{ item.name }}", "{{ item.expansion }}", "{{ item.language }}", "{{item.product_id}}",                                                                 "{{item.normal_clean_stock}}", "{{item.foil_clean_stock}}", "{{item.normal_clean_price}}",
                                                              "{{item.foil_clean_price}}", true
                                                        );

                                                        populateConditionTable(
                                                            "false", "played", "{{ item.name }}", "{{ item.expansion }}", "{{ item.language }}",
                                                             "{{item.product_id}}", "{{item.normal_played_stock}}",
                                                             "{{item.foil_played_stock}}", "{{item.normal_played_price}}", "{{item.foil_played_price}}",
                                                              true

                                                        );

                                                        populateConditionTable(
                                                            "false", "heavily_played", "{{ item.name }}", "{{ item.expansion }}", "{{ item.language }}",
                                                             "{{ item.product_id }}", "{{ item.normal_heavily_played_stock }}",
                                                             "{{ item.foil_heavily_played_stock }}", "{{ item.normal_heavily_played_price }}",
                                                              "{{ item.foil_heavily_played_price }}", true


                                                        );

                                                        populateConditionTable(
                                                            "false", "restock", "{{ item.name }}", "{{ item.expansion }}", "{{ item.language }}",
                                                             "{{ item.product_id }}", "0",
                                                             "0", "0", "0", true

                                                        );

                                                        var textId = "restock-content-submit-{{ item.product_id }}";
                                                        var buttonId = "restock-button-submit-{{ item.product_id }}";

                                                        jqueryDialogBox("#" + textId, "#" + buttonId);

                                                    </script>

                                                {% else %}

                                                    <div class="" id="restock-content-login-{{ item.product_id }}" title="Restock">
                                                        <h4>You must be logged in to use this feature</h4>
                                                        <hr>
                                                        <form method="GET" action="{% url 'login' %}">
                                                            <button type="submit" class="btn opaque-black-background">Login Now</button>
                                                            <input name="redirect-path" type="hidden" value="{{ request.get_full_path }}">
                                                        </form>
                                                    </div>

                                                    <script>
                                                        populateConditionTable(
                                                            "true", "clean", "{{ item.name }}", "{{ item.expansion }}", "{{ item.language }}",
                                                             "{{ item.product_id}}", "{{item.normal_clean_stock}}",
                                                             "{{ item.foil_clean_stock }}", "{{ item.normal_clean_price }}",
                                                              "{{ item.foil_clean_price }}", false
                                                        );

                                                        populateConditionTable(
                                                            "false", "played", "{{ item.name }}", "{{ item.expansion }}", "{{ item.language }}",
                                                            "{{item.product_id}}", "{{item.normal_played_stock}}",
                                                             "{{item.foil_played_stock}}", "{{item.normal_played_price}}",
                                                              "{{item.foil_played_price}}", false
                                                        );

                                                        populateConditionTable(
                                                            "false", "heavily_played", "{{ item.name }}", "{{ item.expansion }}", "{{ item.language }}",
                                                             "{{item.product_id}}", "{{item.normal_heavily_played_stock}}",
                                                             "{{item.foil_heavily_played_stock}}", "{{item.normal_heavily_played_price}}",
                                                             "{{item.foil_heavily_played_price}}", false
                                                        );

                                                        populateConditionTable(
                                                            "false", "restock", "{{ item.name }}", "{{ item.expansion }}", "{{ item.language }}",
                                                            "{{item.product_id}}", "0", "0", "0", "0", false

                                                        );

                                                        var textId = "restock-content-login-{{ item.product_id }}";
                                                        var buttonId = "restock-button-login-{{ item.product_id }}";

                                                        jqueryDialogBox("#" + textId, "#" + buttonId);


                                                    </script>




                                                {% endif %}


                                            </div>
                                        </td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                {% endif %}
                <div class="row">
                    <div style="color: rgba(0, 0, 0, 0.6);" class="col-sm-3">
                        Viewing {{ items.start_index }}-{{ items.end_index }} of {{ items.paginator.count }} results
                    </div>
                    <div class="col-sm-7"></div>
                    <div class="col-sm-2">{% include 'pagination.html' %}</div>
                </div>
            </div>
        </div>

    </div>


    <script src="{% static 'custom_js/select_tab_search_results.js' %}"></script>

    <!-- Load autocomplete() function from jquery -->
    <script src="{% static 'custom_js/jquery_autocomplete.js' %}"></script>

    <!-- Load jqueryMultiFieldAutocomplete() function from jquery -->
    <script src="{% static 'custom_js/jquery_multi_autocomplete.js' %}"></script>

    <!-- Load jquery function for dialog box -->
    <script>jqueryDialogBox("#cmc-help-text", "#cmc-help-button");</script>
    <script>jqueryDialogBox("#oracle-text-help-text", "#oracle-text-help-button");</script>
    <script>jqueryDialogBox("#set-help-text", "#set-help-button");</script>
    <script>jqueryDialogBox("#artist-help-text", "#artist-help-button");</script>
    <script>jqueryDialogBox("#rarity-help-text", "#rarity-help-button");</script>
    <script>jqueryDialogBox("#subtypes-help-text", "#subtypes-help-button");</script>

    <!-- Show hidden elements that were hidden to avoid user seeing elements before javascript changes them during rendered page
     $("#advanced-search-submit-button").show()</script></script>-->
    <script>$(".hidden-dialog").show() </script>



    <!-- Load Card info from api to populate autocomplete fields -->
    <script>
        $.ajax({
            method: "GET",
            url: "{% url 'card_info' %}",
            success: function(data){
                jqueryMultiFieldAutocomplete(data.expansions, "#advanced-search-form-expansion");
                jqueryMultiFieldAutocomplete(data.subtypes, "#advanced-search-form-subtypes");
                jqueryMultiFieldAutocomplete(data.artists, "#advanced-search-form-card-artist");
            },
        });
    </script>

    <!-- Disable Enter Key for Advanced Search Form to prevent accidental form submission -->
    <script>
        $("#advanced-search-div").on("keydown", "form", function(event) {
            return event.key != "Enter";
        });
    </script>


    <!-- Change Mana Cost string into SCG images -->
    <script src="{% static 'custom_js/mana_cost_svg.js' %}"></script>
    <script>
        var tag = document.getElementsByClassName("search-page-mana-cost");
        for(k = 0; k < tag.length; k++){
            var string = tag[k].getAttribute("data-value");
            var svgList = manaSvgImages(string);

            svgList.forEach( svgImage => {
                tag[k].appendChild(svgImage);
            });
        };


    </script>

{% endblock %}
