{% extends "home.html" %}
{% load crispy_forms_tags %}
{% load staticfiles %}
{% load extended_tags %}
{% block set_list %}

{% include 'search_result_style.html' %}

    {% if error != '' %}

        <h1>Error</h1>

    {% else %}

            <div class="container-fluid" style="min-height:95%;">
                <div class="row" style="margin-top:1%;">
                    <div class="col-sm-1"></div>
                    <div id="dataRow" class="col-sm-6" style="">

                        <div class="">
                            <table style="color: rgb(80,80,80); margin-top: 5%;" class="nav-pills nav-stacked table table table-hover table-sm">
                                <thead class="thead-inverse">
                                    <tr class="header">
                                      <th id=""></th>
                                      <th id="n">Name</th>
                                      <th id="">Expansion</th>
                                        <th>Condition</th>
                                      <th id="p">Price</th>
                                    </tr>
                                </thead>
                                <tbody>

                                {% for item, image in items %}


									<tr class="">
                                        <td>
                                            <img style="max-height:75px;"
                                                 src="https://img.scryfall.com/cards/large/front/e/5/e52214e1-404a-405a-b08e-20e13c087338.jpg?1559959289">
                                        </td>

										<td>
											{{item.product_name}}
										</td>
										<td>({{item.set_name}})</td>

                                        <td>Near Mint Foil</td>

                                        <td>
                                            <form action="{% url 'add_to_cart' item.id %}" method="post">
                                                {% csrf_token %}
                                                ${{1.99|floatformat:2}}
                                                <input style="max-width:40px;" size="2" type="number" name="quantity" min="1" max="8">
                                                <button class="btn btn-success" style="max-height:40px;"><i class="material-icons">add</i></button>
                                            </form>
                                        </td>
									</tr>

								</tbody>
                                {% endfor %}

                            </table>
                        </div>

                    </div>

                    {% include 'sidebar.html' %}
                </div>
            </div>



    {% endif %}

    {% block script %}
    <script>

       $(document).on('change','#id_condition_select',function(){
          var product_id = this.dataset.product_id;

           $.ajax({
            url: '/ajax/info/',
            data: {
              'product_id': product_id
            },

            dataType: 'json',
            success: function (data) {
              alert("D" + data.card);

            }
          });

       });
       $(document).on('change','#id_language_select',function(){console.log(this.value)});
       $(document).on('change','#id_foil_select',function(){console.log(this.value)});

  </script>
{% endblock %}


 <!-- <script>
  var init_condition = 'near mint';
  var init_language = 'english';
  var init_foil = false;
  var dict = {{model|safe}};
  

  function conditionChange(obj){
    var condition = obj.value;
    init_condition = condition;
    var idee = obj.id;
    var item_condition = dict[idee][init_foil][init_language][condition]['condition'];
    var item_quantity = dict[idee][init_foil][init_language][condition]['quantity'];
    var item_price = dict[idee][init_foil][init_language][condition]['price'];

    document.getElementById('price_' + obj.id).innerText = '$' + item_price + " " + "(" + (item_quantity) + " in stock)";
  }


  function languageChange(obj){
    var language = obj.value;
    init_language = language;
    var idee = obj.id;
    var item_condition = dict[idee][init_foil][language][init_condition]['condition'];
    var item_price = dict[idee][init_foil][language][init_condition]['price'];
    var item_quantity = dict[idee][init_foil][language][init_condition]['quantity'];

    document.getElementById('price_' + obj.id).innerText = '$' + item_price + " " + "(" + (item_quantity) + " in stock)";

  }


  function foilChange(obj){
    var foil = obj.value;
    init_foil = foil;
    var idee = obj.id;
    var item_condition = dict[idee][foil][init_language][init_condition]['condition'];
    var item_price = dict[idee][foil][init_language][init_condition]['price'];
    var item_quantity = dict[idee][foil][init_language][init_condition]['quantity'];
    document.getElementById('price_' + obj.id).innerText = '$' + item_price + " " + "(" + (item_quantity) + " in stock)";

  }




</script>   -->   


{% endblock %}



  



